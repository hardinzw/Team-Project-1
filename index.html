<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery.js"></script>
    <title>Record Collector</title>
</head>
<body>
<header>
    <nav class="navbar navbar-expand-lg navbar-dark" style= "background-color: rgb(209, 3, 3)">
        <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse"
            data-target="#navbarTogglerDemo02">
            <span class="navbar-toggler-icon"></span>
        </button>
        <a class="navbar-brand" href="#!">Record Collector</a>

        <div class="collapse navbar-collapse" id="navbarTogglerDemo02">
            <ul class="navbar-nav mr-auto mt-2 mt-md-0">
                <li class="nav-item active">
                    <a class="nav-link" href="#!">Search <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#!">Collection</a>
                </li>
            </ul>
        </div>
    </nav>
</header>

<br>

<div class="container">
    <div class="jumbotron" style="background-color: rgb(233, 0, 0); color: white; font-weight: bold">
      <h1 class="text-center">Welcome to Record Collector!</h1>
      <h4 class="text-center">The App that allows you to search for records, create a wishlist, and keep track of your collection.</h4>
    </div>

    <div class="row">
        <div class="col-md-12">
          <div class="card mb-4">
            <div class="card-header" style= "background:rgb(233, 0, 0); color: white; font-weight: bold">Search for an Album</div>
            <div class="card-body">
  
              <form>
                <div class="form-group">
                  <label for="title-input">Title</label>
                  <input class="form-control" id="title-input" type="text">
                </div>
                <div class="form-group">
                  <label for="artist-input">Artist Name</label>
                  <input class="form-control" id="artist-input" type="text">
                </div>
                <div class="form-group">
                  <label for="genre-input">Genre</label>
                  <input class="form-control" id="genre-input" type="text">
                </div>
                <div class="form-group">
                  <label for="year-input">Year Released</label>
                  <input class="form-control" id="year-input" type="text">
                </div>
                <button type="button" class="btn btn-outline-dark float-right" id="search-btn">Search</button>
              </form>
  
            </div>
          </div>
        </div>
      </div>

</div>

<div class="container">   
    <div class="row">
    <div class="col-md-12">
    <div class="card mb-4">
    <div class="card-header" style= "background:rgb(233, 0, 0); color: white; font-weight: bold">Search Result</div>                
                  
      <div class="card mb-3">
        <img src="" class="card-img-top" id="image-result">
          <div class="card-body">
            <h5 class="card-title"><b> Title: </b> <span id="title-result"> Title Example</span></h5>
            <p class="card-text"><b>Description: </b><span id="description-result">Some quick example text to build on the card title and make up the bulk of the card's content.</span></p>
            <ul class="list-group list-group-flush">
              <li class="list-group-item"><b>Artist: </b><span id="artist-result">Artist Example</span></li>
              <li class="list-group-item"><b>Genre: </b><span id="genre-result">Genre Example</span></li>
              <li class="list-group-item"><b>Year Released: </b><span id="year-result">Year Example</span></li>
              <li class="list-group-item"><b>Songs: </b><span id="songs-result">Songs 1 Example</span></li>
              <li class="list-group-item"><b>Pricing: </b><span id="price-result"></span></li>
            </ul>
            <br>
          
            <button type="button" class="btn btn-outline-dark float-right" id="collection-btn">Add to Collection</button>
          </div>
      </div>  
    
    </div>                
    </div>
    </div>
    </div>
</div>
    
<script>

  $("#search-btn").on("click", function (event) {
           event.preventDefault();

           var sTitle = $("#title-input").val().trim();
           var sArtist = $("#artist-input").val().trim();
           var sGenre = $("#genre-input").val().trim();
           var sYear = $("#year-input").val().trim();

           console.log(sTitle);
           console.log(sArtist);
           console.log(sGenre);
           console.log(sYear);

  var queryURL = "https://api.discogs.com/database/search?release_title=" +sTitle + "&artist=" + sArtist + "&genre=" + sGenre + "&year" + sYear+ "&format=vinyl&per_page=1&page=1&key=CQwYyYowOAghyybYpMYL&secret=hlsXvJXvbpgfeoNJJHhOjEmSWzBgKvnY";

$.ajax({
  url: queryURL,
  method: "GET"
}).then(function(response) {
  console.log(response);
  console.log(response.results[0].title);
  var imageResult = $("#image-result").attr("src", response.results[0].cover_image).addClass("limitPics");
  var titleResult = $("#title-result").text(response.results[0].title);
  var yearResult = $("#year-result").text(response.results[0].year);
  var genreResult = $("#genre-result").text(response.results[0].genre);
  var releaseID = response.results[0].id;
  console.log(releaseID);

      var queryURL = "https://api.discogs.com/marketplace/price_suggestions/" + releaseID + "?token=IxYjEFQzSJoGKBwroxGLmyBkwplVfHZgZkrcdxeg";
      $.ajax({
      url: queryURL,
      method: "GET"
      }).then(function(response) {
        console.log(response);
        var priceResults = $("#price-result").text(response['Fair (F)'].value);
      }); 
    });
  });
</script>

<style>
.limitPics{
  padding-top: 10px;
  display: block;
  margin-left: auto;
  margin-right: auto;
  width: 50%;
}

</style>


</body>

</html>